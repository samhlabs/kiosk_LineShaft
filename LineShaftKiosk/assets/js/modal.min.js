jQuery(document).ready(function(n){function i(i){var t=i.width()/2,s=i.offset().left+t,e=i.offset().top+t-n(window).scrollTop(),d=o(e,s,t,n(window).height(),n(window).width());return i.css("position","fixed").velocity({top:e-t,left:s-t,translateX:0},0),d}function o(n,i,o,t,s){var e=i>t/2?i:t-i,d=n>s/2?n:s-n;return Math.ceil(Math.sqrt(Math.pow(e,2)+Math.pow(d,2))/o)}function t(i,o,t){i.velocity({scale:o},400,function(){n("body").toggleClass("overflow-hidden",t),t?i.parents(".cd-section").addClass("modal-is-visible").end().off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"):i.removeClass("is-visible").removeAttr("style").siblings('[data-type="modal-trigger"]').removeClass("to-circle")})}function s(){{var i=n(".cd-section.modal-is-visible").find(".cd-modal-bg"),t=i.siblings(".btn").offset().top+layerRadius-n(window).scrollTop(),s=i.siblings(".btn").offset().left+layerRadius;o(t,s,layerRadius,n(window).height(),n(window).width())}i.velocity({top:t-layerRadius,left:s-layerRadius},0)}function e(){var i=n(".cd-section.modal-is-visible");i.removeClass("modal-is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t(i.find(".cd-modal-bg"),1,!1)}),i.parents(".no-csstransitions").length>0&&t(i.find(".cd-modal-bg"),1,!1)}n('[data-type="modal-trigger"]').on("click",function(){var o=n(this),s=i(o.next(".cd-modal-bg"));o.addClass("to-circle"),o.next(".cd-modal-bg").addClass("is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t(o.next(".cd-modal-bg"),s,!0)}),o.parents(".no-csstransitions").length>0&&t(o.next(".cd-modal-bg"),s,!0)}),n(".cd-section .cd-modal-close").on("click",function(){e()}),n(document).keyup(function(n){"27"==n.which&&e()}),n(window).on("resize",function(){n(".cd-section.modal-is-visible").length>0&&window.requestAnimationFrame(s)})});